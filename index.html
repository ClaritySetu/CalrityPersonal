<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ClarityStream | Interactive Feed</title>
    <style>
        :root {
            --bg: #000000;
            --card: #1c1c1e;
            --border: #2c2c2e;
            --text: #ffffff;
            --text-dim: #8e8e93;
            --accent: #0a84ff;
            --physics: #ffd60a;
            --tech: #bf5af2;
            --tasks: #ff453a;
            --finance: #32d74b;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg); color: var(--text);
            margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center;
        }

        /* --- Header & Navigation --- */
        header {
            position: sticky; top: 0; width: 100%; background: rgba(0,0,0,0.8);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border); z-index: 1000; padding: 15px 0;
            text-align: center;
        }
        header h1 { font-size: 20px; margin: 0; background: linear-gradient(45deg, #f09433, #dc2743, #bc1888); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* --- Filter Bar --- */
        .filter-bar {
            display: flex; gap: 10px; overflow-x: auto; width: 100%; max-width: 600px;
            padding: 15px 20px; scrollbar-width: none;
        }
        .filter-bar::-webkit-scrollbar { display: none; }
        .filter-btn {
            background: var(--card); border: 1px solid var(--border); color: var(--text-dim);
            padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 600;
            white-space: nowrap; cursor: pointer; transition: 0.2s;
        }
        .filter-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        /* --- Feed Container --- */
        .feed { width: 100%; max-width: 600px; padding: 10px; }
        
        .card { 
            background: var(--card); border-radius: 20px; padding: 20px; 
            margin-bottom: 15px; border: 1px solid var(--border);
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
        .card-title { font-weight: 700; font-size: 16px; flex: 1; padding-right: 10px; }
        
        .badge { font-size: 10px; font-weight: 900; padding: 4px 8px; border-radius: 6px; text-transform: uppercase; }
        .cat-physics { color: var(--physics); background: rgba(255, 214, 10, 0.1); }
        .cat-tech { color: var(--tech); background: rgba(191, 90, 242, 0.1); }
        .cat-logistics { color: var(--tasks); background: rgba(255, 69, 58, 0.1); }
        .cat-finance { color: var(--finance); background: rgba(50, 215, 75, 0.1); }

        .card-content { font-size: 15px; line-height: 1.5; white-space: pre-wrap; margin-bottom: 15px; }
        
        .card-footer { display: flex; gap: 25px; border-top: 1px solid var(--border); padding-top: 15px; }
        .action-btn { cursor: pointer; font-size: 18px; transition: transform 0.2s; filter: grayscale(1); }
        .action-btn.active { filter: grayscale(0); transform: scale(1.2); }

        .pinned-label { font-size: 11px; color: var(--accent); font-weight: 800; margin-bottom: 5px; display: none; }
        .is-pinned .pinned-label { display: block; }
        .is-pinned { border-color: var(--accent); background: #001220; }

        a { color: var(--accent); text-decoration: none; }
        .empty-state { text-align: center; padding: 50px; color: var(--text-dim); }
    </style>
</head>
<body>

    <header><h1>ClarityStream</h1></header>

    <div class="filter-bar" id="filterBar">
        <div class="filter-btn active" onclick="filterFeed('all', this)">All</div>
        <div class="filter-btn" onclick="filterFeed('physics', this)">Physics</div>
        <div class="filter-btn" onclick="filterFeed('tech', this)">Tech</div>
        <div class="filter-btn" onclick="filterFeed('logistics', this)">Logistics</div>
        <div class="filter-btn" onclick="filterFeed('finance', this)">Finance</div>
        <div class="filter-btn" onclick="filterFeed('saved', this)">üîñ Saved</div>
    </div>

    <div class="feed" id="mainFeed">
        </div>

    <script>
        // DATA OBJECT: Incorporating your Keep Archive
        const notes = [
            { id: 1, cat: 'tech', title: 'AI Capabilities', content: '‚Ä¢ Question sets & Theory via LaTeX\n‚Ä¢ Manim simulations for Physics\n‚Ä¢ NoteBookLM chapter research' },
            { id: 2, cat: 'physics', title: 'Physics Roadmap', content: 'Relative motion, River-boat, Rain-man, COM in explosion, Vertical circular motion conditions.' },
            { id: 3, cat: 'finance', title: 'Subscriptions', content: 'BookSnap, Google Drive (‚Çπ1300), Gemini (Dec 26), ISAC lifetime.' },
            { id: 4, cat: 'logistics', title: 'Devalay Measurements', content: 'Platform: 27", Pooja: 34", Gallery: 57", Cupboard Depth: 29".' },
            { id: 5, cat: 'physics', title: 'YouTube Resources', content: 'Fluid Mechanics, Error Analysis, and Work Energy Power playlists active.' },
            { id: 6, cat: 'tech', title: 'Voice-to-Text Strategy', content: 'Evaluating Otter.ai. AI assists but learning takes time. Practice is key.' },
            { id: 7, cat: 'finance', title: 'Vehicle Logs', content: 'Altroz: Service done Aug 2025.\nJupiter: Next service June 2026.' },
            { id: 8, cat: 'logistics', title: 'Getup Checklist', content: 'Flight mode (1hr), Lukewarm water, JAPA (4 mala), Newspaper.' }
        ];

        // State Management (Persistent)
        let pinnedIds = JSON.parse(localStorage.getItem('pins')) || [];
        let savedIds = JSON.parse(localStorage.getItem('saved')) || [];
        let currentFilter = 'all';

        function renderFeed() {
            const container = document.getElementById('mainFeed');
            container.innerHTML = '';

            let filteredNotes = notes;
            if (currentFilter === 'saved') {
                filteredNotes = notes.filter(n => savedIds.includes(n.id));
            } else if (currentFilter !== 'all') {
                filteredNotes = notes.filter(n => n.cat === currentFilter);
            }

            // Sort logic: Pinned first
            filteredNotes.sort((a, b) => {
                const aPinned = pinnedIds.includes(a.id) ? 1 : 0;
                const bPinned = pinnedIds.includes(b.id) ? 1 : 0;
                return bPinned - aPinned;
            });

            if (filteredNotes.length === 0) {
                container.innerHTML = `<div class="empty-state">No notes found in this category.</div>`;
                return;
            }

            filteredNotes.forEach(note => {
                const isPinned = pinnedIds.includes(note.id);
                const isSaved = savedIds.includes(note.id);
                
                const card = document.createElement('div');
                card.className = `card ${isPinned ? 'is-pinned' : ''}`;
                card.innerHTML = `
                    <div class="pinned-label">üìå PINNED</div>
                    <div class="card-header">
                        <span class="card-title">${note.title}</span>
                        <span class="badge cat-${note.cat}">${note.cat}</span>
                    </div>
                    <div class="card-content">${note.content}</div>
                    <div class="card-footer">
                        <span class="action-btn" onclick="toggleLike(this)">ü§ç</span>
                        <span class="action-btn ${isPinned ? 'active' : ''}" onclick="togglePin(${note.id})">üìå</span>
                        <span class="action-btn ${isSaved ? 'active' : ''}" onclick="toggleSave(${note.id})">üîñ</span>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function filterFeed(category, el) {
            currentFilter = category;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            el.classList.add('active');
            renderFeed();
        }

        function togglePin(id) {
            if (pinnedIds.includes(id)) {
                pinnedIds = pinnedIds.filter(pid => pid !== id);
            } else {
                pinnedIds.push(id);
            }
            localStorage.setItem('pins', JSON.stringify(pinnedIds));
            renderFeed();
        }

        function toggleSave(id) {
            if (savedIds.includes(id)) {
                savedIds = savedIds.filter(sid => sid !== id);
            } else {
                savedIds.push(id);
            }
            localStorage.setItem('saved', JSON.stringify(savedIds));
            renderFeed();
        }

        function toggleLike(el) {
            el.classList.toggle('active');
            el.innerHTML = el.classList.contains('active') ? '‚ù§Ô∏è' : 'ü§ç';
        }

        // Initial Load
        renderFeed();
    </script>
</body>
</html>
